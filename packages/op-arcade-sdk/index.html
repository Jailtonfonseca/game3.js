<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset='utf-8'>
	<meta name='viewport' content='width=device-width,initial-scale=1'>

	<title>OP Arcade SDK Example</title>
	<script defer src='/dist/op.js'></script> <!-- load sdk as op -->

	<!-- tailwind css -->
	<link href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css" rel="stylesheet">

	<!-- toastify -->
	<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">

</head>

<script>
	function connect() {
		// op.initialize(config)

		console.log(op.props());

		let tourney_id = document.getElementById("input-tourney-id").value;

		let options = {
			tourney_id
		}

		op.getTourney(options).then
		(
			(result) => {
				// catch error
				if (result instanceof Response) {
					Toastify({
						text: "Unable to Connect:  " + result.statusText,
						backgroundColor: "#ff4444"
					}).showToast();
				}

				else {

					console.log(result)

					Toastify({
						text: "Results Found:  " + result.records.length
					}).showToast();
				}
			}
		)
	}

	function playerLogin() {
		op.loginPrompt();
	}


	async function attemptTourney() {
		// 		Toastify({
		// text: "This is a toast",
		// duration: 3000,
		// destination: "https://github.com/apvarun/toastify-js",
		// newWindow: true,
		// close: true,
		// gravity: "top", // `top` or `bottom`
		// position: "right", // `left`, `center` or `right`
		// backgroundColor: "linear-gradient(to right, #00b09b, #96c93d)",
		// stopOnFocus: true, // Prevents dismissing of toast on hover
		// onClick: function(){} // Callback after click
		// }).showToast();

		

		Toastify({
			text: await op.attemptTourney()
		}).showToast();
	}
</script>

<style>
	
</style>

<body>

	<div class="grid grid-cols-2 gap-4 h-80">
		<div class="bg-green-600 col-span-2"></div>

		<div>
			<div class="flex items-center p-1 w-full">			
				<input id="input-tourney-id" class="py-2 px-1 bg-white text-gray-700 
				placeholder-gray-500 shadow-md rounded-lg text-base 
				focus:outline-none focus:ring-2 
				focus:ring-purple-600 focus:border-transparent"
				
				placeholder="tourney-id (xxxx-xx...)">			
				<button 
				class="m-2.5 px-10 py-1 text-sm text-purple-600 
				font-semibold rounded-full border border-purple-200 
				hover:text-white hover:bg-purple-600 hover:border-transparent 
				focus:outline-none focus:ring-2 focus:ring-purple-600 focus:ring-offset-2"
				onclick="connect()">CONNECT</button>	  
			</div>
		</div>
		
		<div>
			<button 
			class="m-2.5 px-4 py-1 text-sm text-purple-600 
			font-semibold rounded-full border border-purple-200 
			hover:text-white hover:bg-purple-600 hover:border-transparent 
			focus:outline-none focus:ring-2 focus:ring-purple-600 focus:ring-offset-2"
			onclick="attemptTourney()">ATTEMPT</button>	  
		</div>
		<div class="...">
			<button 
			class="m-2.5 px-4 py-1 text-sm text-purple-600 
			font-semibold rounded-full border border-purple-200 
			hover:text-white hover:bg-purple-600 hover:border-transparent 
			focus:outline-none focus:ring-2 focus:ring-purple-600 focus:ring-offset-2"
			onclick="playerLogin()">LOGIN</button>	  
		</div>
		<div class="col-span-2 ...">7</div>
	  </div>


</body>
</html>

<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>